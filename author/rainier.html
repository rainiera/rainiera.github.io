<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />

    <title>rainier - Articles by rainier</title>

    <meta charset="utf-8" />
    <link rel="stylesheet" href="/theme/css/poole.css"/>
    <link rel="stylesheet" href="/theme/css/syntax.css"/>
    <link rel="stylesheet" href="/theme/css/lanyon.css"/>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
    <link rel="stylesheet" href="/theme/css/styles.css"/>
  </head>

  <body class="layout-reverse">
<!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">
<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <div class="profile">
      <img src="/theme/img/profile.png"/>
    </div>
  </div>

  <nav class="sidebar-nav">

    <a class="sidebar-nav-item" href="/#about">about</a>
    <a class="sidebar-nav-item" href="/pages/blog.html#blog">blog</a>
    <a class="sidebar-nav-item" href="/projects#projects">projects</a>


  </nav>

  <div class="sidebar-item">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
    <ul class="social">
      <li><a class="sc-github" href="https://github.com/rainiera" target="_blank"><i class="fa fa-github"></i></a></li>
      <li><a class="sc-angellist" href="https://angel.co/rainiera" target="_blank"><i class="fa fa-angellist"></i></a></li>
      <li><a class="sc-linkedin" href="https://linkedin.com/in/rainiera" target="_blank"><i class="fa fa-linkedin"></i></a></li>
      <li><a class="sc-twitter" href="https://twitter.com/rainieratx" target="_blank"><i class="fa fa-twitter"></i></a></li>
    </ul>
  </div>

  <div class="sidebar-item">
    <p>
    &copy; 2016. All rights reserved.
    </p>
    <p class="tiny-note">
      <a class="muted" href="https://github.com/rainiera/pelicanyan">pelicanyan v0.1</a>
    </p>
  </div>
</div>    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">rainier</a>
            <small>codes, reads, and blogs</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="content-title">
<h2>Articles by rainier</h2>
</div>
<div class="posts">
  <div class="post">
    <h1 class="post-title">
      <a href="/learning-how-to-speak.html" rel="bookmark" title="Permalink to Learning how to speak">Learning how to&nbsp;speak</a>
    </h1>
    <span class="post-date">January 01, 2016</span>

    <p>I didn&#8217;t really talk before I was 4 years old. In fact, I learned how to read before I could converse with others. According to my parents, a doctor said that I would have to attend a special school for not knowing how to speak&nbsp;properly.</p>
<p>Some kind of speech impediment carried on through the beginning of high school. I stuttered whenever I was in social situations, even the most casual ones, and still do occasionally. The following is a list of things that have particularly helped me overcome&nbsp;stuttering.</p>
<p><strong>Joining the debate team</strong>. I wanted to <em>decimate</em> my stuttering. The first time I walked into the debate classroom, I watched our school&#8217;s two senior A-debaters <em>spread</em>, or &#8220;speed read&#8221;, about nuclear weapon possession policies at over 300 <span class="caps">WPM</span>.</p>
<p><em>(Aside: The reason why debaters talk really fast is because their speeches are time-constrained, and they need to develop arguments as efficiently as possible. This is the nearly </em>pure-logos<em> model of debate that is present in many competitive debate circuits. Some people think it is bad, and others think it is good. I would argue that it is good because it fosters critical thinking skills (the human brain can process up to 800 <span class="caps">WPM</span>, <span class="caps">BTW</span>), creates time for arguments to be developed more thoroughly, and even if there were a good reason for it being bad, the best debaters still have to &#8220;adapt&#8221; their style to the many &#8220;lay&#8221; judges who prefer more pathos and slower talking&nbsp;anyway.)</em></p>
<p>I thought debate was cool. It was a domain outside of the sciences that I wasn&#8217;t good at yet (I was terrible for a while), and it was very competitive. The camaraderie and trophies were thrilling, and I got to be out of town nearly every weekend. <strong>I ended up qualifying for debate nationals in 12th grade and <a href="https://youtu.be/jawI1nBR_9E?t=6m57s" target="_blank">teaching high schoolers</a> how to debate</strong> at <span class="caps">UT</span> Austin&#8217;s camp that summer, so it was an early resume-padder&nbsp;too.</p>
<p>Due to the research that debate evidence required, I picked up a lot of random domain knowledge in politics, philosophy and argumentation. Most importantly though, it helped me to be a more logical and persuasive communicator, a trait that has become indispensible in my career. <strong>From speaking to recruiters to career fair, talking my way through techincal interviews with engineers, to making friends in college</strong>, I would have a significantly different experience if it weren&#8217;t for speech and&nbsp;debate.</p>
<p><strong>Playing games</strong>. My friends introduced the game of <a href="https://en.wikipedia.org/wiki/Taboo_(game)" target="_blank">Taboo</a> to me in 12th grade, and I was hooked. Players have their partners guess the word on the player&#8217;s card without using the word itself or five additional words listed on the card. I liked it a lot because it forced me to describe ideas with both time and strict word constraints. I also started playing <a href="https://en.wikipedia.org/wiki/Catch_Phrase_(game)" target="_blank">Catch Phrase</a> last summer, which has similar rules with more lax constraints. I have had a lot of fun with this game in particular, so much that I&#8217;ve been itching to code it up or discuss various tactics in&nbsp;depth.</p>
<p>Finally, I came up with this sort of ironic game while my girlfriend and I were out for dinner. While waiting for her, I went to the first link when  Googling &#8220;funny long jokes&#8221;. This &#8220;game&#8221; involves looking up a funny long joke (typically a story), summarizing it in your head, recalling its details without referencing the text, and delivering it (even embellishing it) in a way that people will &#8220;get&#8221;. It&#8217;s fantastic because it&#8217;s fun socializing practice (however shallow it is 😛), and it also builds up your short-term&nbsp;memory.  </p>
<p><em>Can you think of other ways to improve&nbsp;speech?</em></p>
  </div>
  <div class="post">
    <h1 class="post-title">
      <a href="/rainiers-2015-in-review.html" rel="bookmark" title="Permalink to Rainier’s 2015 in Review">Rainier&#8217;s 2015 in&nbsp;Review</a>
    </h1>
    <span class="post-date">January 01, 2016</span>

    <p>In 2015&nbsp;I&#8230;</p>
<p><strong><span class="dquo">&#8220;</span>Figured out&#8221; the kind of people I want to spend time with.</strong> It&#8217;s a well-known adage that &#8220;you are the average of the top five people you spend time with&#8221;. Ignoring cases like, raising four babies or something, there is definitely some truth to this in college. In Fall 2014, I joined two student orgs. In one of them, I quickly figured out that the majority were mainly preoccupied with gossip and padding their resumes, so I did not re-apply to be a member the next semester. The other was <a href="http://texaslan.org" target="_blank">Lambda Alpha Nu</a>, a brand-new co-ed tech-interest fraternity. I was in the very first &#8220;Alpha Class&#8221; following its&nbsp;establishment.</p>
<p>The organization has left a huge impact on my career aspirations. With the founders (now alumni) working at high-impact tech companies and beginning startups, I feel like a career dedicated to computer science is my opportunity to optimize the balance between largest net positive impact on the world and my own personal enjoyment of the field during my relatively short time here on&nbsp;Earth.</p>
<p><strong>Got lucky and had a lot of interviews.</strong> From the entire year, I completed 31 interviews and 4 coding challenges. Over two-dozen of them were during September and October&nbsp;2015.</p>
<p>Truth be told, it was a less-than-optimal strategy! But I knew that I wouldn&#8217;t practice or gain confidence unless I actually interviewed with companies, no matter how much I actually wanted to work for&nbsp;them.</p>
<p><strong>Went to the Bay Area three times and the Northeast once.</strong> I had the privilege of traveling out of state several times in 2015. I flew out for 2 interviews and 2&nbsp;hackathons.</p>
<p>In late March I went to <a href="http://officesnapshots.com/2015/08/17/weebly-san-francisco-offices/" target="_blank">Weebly</a>&#8216;s beautiful office in San Francisco for an on-site trial for their software engineering internship. Considering I had never made a web app backend before 🙃, this was a <em>huge</em> learning experience. Needless to say, I wasn&#8217;t extended an offer, but it was an experience that <em>really</em> inspired me to try to get an internship in the Bay&nbsp;Area.  </p>
<p>As an early 20th birthday present from my parents, I visited the <a href="https://6sense.com/" target="_blank">6Sense</a>) <span class="caps">HQ</span> in the heart of <a href="https://www.google.com/maps/d/u/0/viewer?mid=z0K33fLxahaU.kMBt4r4w_lUI&hl=en" target="_blank">SoMa</a> to attend their first data science-oriented hackathon! I had a lovely experience and it was the first hackathon where I won a prize. They even got me <a href="https://www.instagram.com/p/6tudxgJgxx/" target="_blank">cake</a> for my&nbsp;birthday.</p>
<p>In November, I went to the <a href="https://clover.com" target="_blank">Clover</a> <span class="caps">HQ</span> in Sunnyvale for the 1st Annual Clover Network Invitational! From Thursday through Saturday&nbsp;we:  </p>
<ul>
<li>Had two practice interviews with immediate feedback followed by the real interview on the last&nbsp;day.  </li>
<li>Had a resume-building workshop where I was fortunate enough to be reviewed by their head of&nbsp;product!  </li>
<li>Hacked with a few other students and one of the Clover engineers, a <span class="caps">UTCS</span>&nbsp;alum!  </li>
<li>Gorged on catered lunches and dinners, followed by adventures in <span class="caps">SF</span> and more&nbsp;food.  </li>
</ul>
<p>The week after Clover, I went to a small school in Princeton, <span class="caps">NJ</span> to participate in HackPrinceton. It helped reinforce my belief that if the endgame is working at $COOL_TECH_COMPANY, starting a successful startup, or building an awesome network, you don&#8217;t <em>have</em> to be at an Ivy, I was in a good place all along! But even more importantly, I realized how important resources and a network is to young engineers, better understood how <em>privileged</em> I am without patting myself on the back, but also how good it feels to be a&nbsp;mentor.</p>
<p><strong>Went to a lot of hackathons.</strong> Nine, to be exact. A large reason of why I went to a lot of hackathons earlier this year is because I felt somewhat behind. I started learning how to code in September 2014 when I began my computer science major, and when I joined Lambda Alpha Nu, I felt behind as a lot of my new friends were landing all these glamorous internships. Understandably, they had been coding much longer than I have, and because of how time works, will always have been coding longer than I have, as long as all of us are alive. But after this interview season and coding nearly every day of my life this year, I feel confident enough to try to be a mentor more&nbsp;often.</p>
<ul>
<li><strong>HackDFW 2015</strong> - worked on MakeRoute, a <span class="caps">PHP</span>/MySQL web app that determines nice restaurants on the route between two&nbsp;places.</li>
<li><strong><span class="caps">SXSW</span> Music Hackathon</strong> - worked on an Android app that filters an Rdio <span class="caps">API</span> playlist based on your heart rate determined by the Microsoft&nbsp;Band.</li>
<li><strong><span class="caps">ATX</span> Hack4Change Civic Hackathon</strong> - worked on an Android backend with Parse and game logic for a collection of nutrition-oriented games aimed at toddlers, called Monstralia by the HealthStart&nbsp;Foundation.</li>
<li><strong>athenahealth <span class="caps">MDP</span> Hackathon</strong> - worked on HealthCruncher, a Python/Flask web <span class="caps">API</span> that calculates heart disease and diabetes predisposition probability with a basic machine learning&nbsp;model.</li>
<li><strong>6Sense DataHack</strong> - built text-graph/&#8221;Fran&#8221;, a library for parsing text backup files and generating a weighted graph based on people they mentioned in&nbsp;texts.</li>
<li><strong>HackTX 2015</strong> - I played around with the Yelp dataset and learned how to use RethinkDB, a key-value store that is probably better than&nbsp;MongoDB.</li>
<li><strong>Clover Network Invitational</strong> - See&nbsp;above.</li>
<li><strong>HackPrinceton 2015</strong> - built Feelsbook. I teamed up with two <span class="caps">NYU</span> engineering freshmen named Claryssa and Minah who were hackathon newbies to help them get their feet wet in web development. We built a Python/Flask-based social networking site-like newsfeed that pooled data from the Indico, Clarifai, and Microsoft facial emotion recognition APIs to ask the user just what <em>exactly</em> was on their mind, whether something was wrong, what made them joyful, and so on, and filtered tweets based on their face as&nbsp;well.</li>
</ul>
<p>The hackathon community&#8217;s been so instrumental in my development that I decided to join the leadership team for HackTX, which was my very first hackathon in 2014 (when I had just learned about for-loops). The organizing community of HackTX are all very amazing&nbsp;people.</p>
<p>I had a very productive, mindful, and <em>lucky</em> 2015. In 2016, I want to be humbler, feel more secure about my abilities (which involves improving them), maintain and create honest, impactful relationships with&nbsp;people.</p>
<p><em>How was your 2015, and what are your plans for 2015 +&nbsp;1?</em></p>
  </div>
  <div class="post">
    <h1 class="post-title">
      <a href="/binary-search-implementation-in-erlang-whats-going-on.html" rel="bookmark" title="Permalink to Binary search implementation in Erlang - what’s going on?">Binary search implementation in Erlang - what&#8217;s going&nbsp;on?</a>
    </h1>
    <span class="post-date">December 27, 2015</span>

    <h2>Let&#8217;s hack on some&nbsp;Erlang</h2>
<p>Erlang was originally built in the late 80s to handle telecom switches. As such, its major features include primitives for concurrency and error recovery, which led to it making its way into applications requiring fault-tolerance, scalability, and maximum availability. I picked it up to learn more about concurrent programming and because it seemed&nbsp;hip.</p>
<p>Plus, here&#8217;s an awkwardly-funny video about one of its original uses in&nbsp;telephony:</p>
<iframe width="420" height="315" src="https://www.youtube.com/embed/xrIjfIjssLE" frameborder="0" allowfullscreen></iframe>

<h2>Setup</h2>
<p>If you&#8217;re on <span class="caps">OSX</span> and have <a href="http://brew.sh/" target="_blank">Homebrew</a>, you can install Erlang with <code>brew install Erlang</code>.</p>
<p>Now <code>cd</code> into a directory where you want to keep your file. To make things simpler, you&#8217;ll want to save your program and run the Erlang <span class="caps">REPL</span> from here, too. <code>vim binary_search.erl</code>, and let&#8217;s&nbsp;begin!</p>
<h2>Writing the&nbsp;header</h2>
<div class="highlight"><pre><span></span><span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">binary_search</span><span class="p">).</span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">binary_search</span><span class="o">/</span><span class="mi">2</span><span class="p">]).</span>
</pre></div>


<p><strong>What&#8217;s going&nbsp;on?</strong></p>
<ul>
<li>A <em>module</em> is just a bunch of functions regrouped into a single file, and has to be the first statement of the&nbsp;file.</li>
<li>We can use the name <code>binary_search</code> to call functions from <em>this</em> module into in other modules, in the form <code>M:F(A)</code>, where <code>M</code> is the module name, <code>F</code> is the function name, and <code>A</code> is the&nbsp;arguments.</li>
<li><code>-export([binary_search/2])</code> defines which functions of the module can be called by the outside world, it describes the public interface of the module. It&#8217;s similar to how encapsulation in <span class="caps">OOP</span> restricts an object&#8217;s externally-usable components through the notions of <code>public</code> and <code>private</code> methods.</li>
<li>The <code>export</code> attribute has the format <code>-export([Function1/Arity, Function2/Arity, ..., FunctionN/Arity])</code>. The <em>arity</em> of a function or operator is the number of arguments or operands it takes. Thusly, <code>binary_search</code> has an arity of&nbsp;2.</li>
</ul>
<h2>Guarding against incorrect&nbsp;types</h2>
<p>The parameters of a binary search should be some comparable target value and a sorted&nbsp;list.</p>
<div class="highlight"><pre><span></span><span class="nf">binary_search</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nv">List</span><span class="p">)</span>
    <span class="k">when</span>
        <span class="nb">is_number</span><span class="p">(</span><span class="nv">X</span><span class="p">),</span>
        <span class="nb">is_list</span><span class="p">(</span><span class="nv">List</span><span class="p">)</span> <span class="o">-&gt;</span>
    <span class="n">bs</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nn">lists</span><span class="p">:</span><span class="nf">sort</span><span class="p">(</span><span class="nv">List</span><span class="p">)).</span>
</pre></div>


<p><strong>What&#8217;s going&nbsp;on?</strong></p>
<ul>
<li><code>is_number</code> and <code>is_list</code> are built-in functions of Erlang, and they do exactly what you&#8217;d expect. They are part of the <code>erlang</code> module, which is automatically imported whenever you use&nbsp;Erlang.</li>
<li>But every other function will have to be called in the <code>M:F(A)</code> format described in the last section (<code>M</code> - module name, <code>F</code> - function name, <code>A</code> - arguments)<ul>
<li>In fact, this is how you will call every function you use in Erlang besides those in the <code>erlang</code> module.</li>
<li>You know how in Python, you can just <code>from time import sleep</code>, or in C, you <code>#include &lt;stdio.h&gt;</code> to add function names into the current namespace? Well, Erlang has a very flat namespace. This <a href="http://stackoverflow.com/a/4476599/5150563" target="_blank">Stack Overflow link</a> has a good explanation of how it&nbsp;works.</li>
</ul>
</li>
<li><code>when</code> is called a &#8220;guard&#8221; type of clause, and it tells us to perform the action following the <code>-&gt;</code> if all statements between <code>when</code> and <code>it</code> are&nbsp;true.</li>
<li>Every function ends with a period. Whatever is the last expression of a function to be executed will have its value returned to the caller without it being&nbsp;mentioned.</li>
</ul>
<h2>The&nbsp;algorithm</h2>
<p>The classic binary search algorithm. We will implement it&nbsp;recursively.  </p>
<p>So, here&#8217;s how it looks in&nbsp;Erlang:</p>
<div class="highlight"><pre><span></span><span class="nf">bs</span><span class="p">(_,</span> <span class="p">[])</span>   <span class="o">-&gt;</span> <span class="n">false</span><span class="p">;</span>
<span class="nf">bs</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="p">[_])</span>  <span class="o">-&gt;</span> <span class="n">false</span><span class="p">;</span>
<span class="nf">bs</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="p">[</span><span class="nv">X</span><span class="p">])</span>  <span class="o">-&gt;</span> <span class="n">true</span><span class="p">;</span>
<span class="nf">bs</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nv">List</span><span class="p">)</span> <span class="o">-&gt;</span>
    <span class="n">ok</span> <span class="o">=</span> <span class="nn">io</span><span class="p">:</span><span class="nf">format</span><span class="p">(</span><span class="s">&quot;bs(</span><span class="si">~p</span><span class="s">, </span><span class="si">~p</span><span class="s">)</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nv">X</span><span class="p">,</span> <span class="nv">List</span><span class="p">]),</span>
    <span class="nv">Length</span> <span class="o">=</span> <span class="nb">length</span><span class="p">(</span><span class="nv">List</span><span class="p">),</span>
    <span class="nv">Middle</span> <span class="o">=</span> <span class="p">(</span><span class="nv">Length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">div</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nv">Value</span> <span class="o">=</span> <span class="nn">lists</span><span class="p">:</span><span class="nf">nth</span><span class="p">(</span><span class="nv">Middle</span><span class="p">,</span> <span class="nv">List</span><span class="p">),</span>
    <span class="k">if</span>
        <span class="nv">X</span> <span class="o">==</span> <span class="nv">Value</span> <span class="o">-&gt;</span> <span class="n">true</span><span class="p">;</span>
        <span class="nv">X</span> <span class="o">&gt;</span> <span class="nv">Value</span> <span class="o">-&gt;</span> <span class="n">bs</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nn">lists</span><span class="p">:</span><span class="nf">sublist</span><span class="p">(</span><span class="nv">List</span><span class="p">,</span> <span class="nv">Middle</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">Length</span><span class="p">));</span>
        <span class="nv">X</span> <span class="o">&lt;</span> <span class="nv">Value</span> <span class="o">-&gt;</span> <span class="n">bs</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nn">lists</span><span class="p">:</span><span class="nf">sublist</span><span class="p">(</span><span class="nv">List</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">Middle</span><span class="p">))</span>
    <span class="k">end</span><span class="p">.</span>
</pre></div>


<p><strong>What&#8217;s going&nbsp;on?</strong></p>
<ul>
<li>The <code>_</code> is the &#8220;don&#8217;t care&#8221; variable, which is a common thing to use in many languages (for instance, whenever you&#8217;re iterating and not using the counter, e.g. <code>for _ in range(0, 10)</code>). This also happens to silence a &#8220;unused variable&#8221; warning made by the Erlang compiler.<ul>
<li>We see these in use for two of the base cases, and their placement makes sense if you think about it. Binary search of an empty list, list containing useless information, or target variable containing useless information should never be&nbsp;true.</li>
</ul>
</li>
<li>We see use of <em>pattern-matching</em>. Instead&nbsp;of</li>
</ul>
<div class="highlight"><pre><span></span><span class="nf">function</span><span class="p">(</span><span class="nv">Args</span><span class="p">)</span>
   <span class="k">if</span> <span class="nv">X</span> <span class="n">then</span>
      <span class="nv">Expression</span>
   <span class="n">else</span> <span class="k">if</span> <span class="nv">Y</span> <span class="n">then</span>
      <span class="nv">Expression</span>
   <span class="n">else</span>
      <span class="nv">Expression</span>
</pre></div>


<p>We&nbsp;write:</p>
<div class="highlight"><pre><span></span><span class="nf">function</span><span class="p">(</span><span class="nv">X</span><span class="p">)</span> <span class="o">-&gt;</span>
  <span class="nv">Expression</span><span class="p">;</span>
<span class="nf">function</span><span class="p">(</span><span class="nv">Y</span><span class="p">)</span> <span class="o">-&gt;</span>
  <span class="nv">Expression</span><span class="p">;</span>
<span class="nf">function</span><span class="p">(_)</span> <span class="o">-&gt;</span>
  <span class="nv">Expression</span><span class="p">.</span>
</pre></div>


<h2>The final&nbsp;code</h2>
<p>Your file, <code>binary_search.erl</code>, should look something like this at the&nbsp;end:</p>
<div class="highlight"><pre><span></span><span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">binary_search</span><span class="p">).</span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">binary_search</span><span class="o">/</span><span class="mi">2</span><span class="p">]).</span>

<span class="nf">binary_search</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nv">List</span><span class="p">)</span>
    <span class="k">when</span>
        <span class="nb">is_number</span><span class="p">(</span><span class="nv">X</span><span class="p">),</span>
        <span class="nb">is_list</span><span class="p">(</span><span class="nv">List</span><span class="p">)</span> <span class="o">-&gt;</span>
    <span class="n">bs</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nn">lists</span><span class="p">:</span><span class="nf">sort</span><span class="p">(</span><span class="nv">List</span><span class="p">)).</span>

<span class="nf">bs</span><span class="p">(_,</span> <span class="p">[])</span>   <span class="o">-&gt;</span> <span class="n">false</span><span class="p">;</span>
<span class="nf">bs</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="p">[</span><span class="nv">X</span><span class="p">])</span>  <span class="o">-&gt;</span> <span class="n">true</span><span class="p">;</span>
<span class="nf">bs</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="p">[_])</span>  <span class="o">-&gt;</span> <span class="n">false</span><span class="p">;</span>
<span class="nf">bs</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nv">List</span><span class="p">)</span> <span class="o">-&gt;</span>
    <span class="n">ok</span> <span class="o">=</span> <span class="nn">io</span><span class="p">:</span><span class="nf">format</span><span class="p">(</span><span class="s">&quot;bs(</span><span class="si">~p</span><span class="s">, </span><span class="si">~p</span><span class="s">)</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nv">X</span><span class="p">,</span> <span class="nv">List</span><span class="p">]),</span>
    <span class="nv">Length</span> <span class="o">=</span> <span class="nb">length</span><span class="p">(</span><span class="nv">List</span><span class="p">),</span>
    <span class="nv">Middle</span> <span class="o">=</span> <span class="p">(</span><span class="nv">Length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">div</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nv">Value</span> <span class="o">=</span> <span class="nn">lists</span><span class="p">:</span><span class="nf">nth</span><span class="p">(</span><span class="nv">Middle</span><span class="p">,</span> <span class="nv">List</span><span class="p">),</span>
    <span class="k">if</span>
        <span class="nv">X</span> <span class="o">==</span> <span class="nv">Value</span> <span class="o">-&gt;</span> <span class="n">true</span><span class="p">;</span>
        <span class="nv">X</span> <span class="o">&gt;</span> <span class="nv">Value</span> <span class="o">-&gt;</span> <span class="n">bs</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nn">lists</span><span class="p">:</span><span class="nf">sublist</span><span class="p">(</span><span class="nv">List</span><span class="p">,</span> <span class="nv">Middle</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">Length</span><span class="p">));</span>
        <span class="nv">X</span> <span class="o">&lt;</span> <span class="nv">Value</span> <span class="o">-&gt;</span> <span class="n">bs</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nn">lists</span><span class="p">:</span><span class="nf">sublist</span><span class="p">(</span><span class="nv">List</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">Middle</span><span class="p">))</span>
    <span class="k">end</span><span class="p">.</span>
</pre></div>


<h2>Putting it to&nbsp;use</h2>
<div class="highlight"><pre><span></span><span class="sc">$ </span><span class="n">erl</span>
<span class="nv">Erlang</span><span class="o">/</span><span class="nv">OTP</span> <span class="mi">18</span> <span class="p">[</span><span class="n">erts</span><span class="o">-</span><span class="mi">7</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">1</span><span class="p">]</span> <span class="p">[</span><span class="n">source</span><span class="p">]</span> <span class="p">[</span><span class="mi">64</span><span class="o">-</span><span class="n">bit</span><span class="p">]</span> <span class="p">[</span><span class="nn">smp</span><span class="p">:</span><span class="mi">8</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span> <span class="p">[</span><span class="n">async</span><span class="o">-</span><span class="nn">threads</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span> <span class="p">[</span><span class="n">hipe</span><span class="p">]</span> <span class="p">[</span><span class="n">kernel</span><span class="o">-</span><span class="nn">poll</span><span class="p">:</span><span class="n">false</span><span class="p">]</span> <span class="p">[</span><span class="n">dtrace</span><span class="p">]</span>

<span class="nv">Eshell</span> <span class="nv">V7</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">1</span>  <span class="p">(</span><span class="n">abort</span> <span class="n">with</span> <span class="err">^</span><span class="nv">G</span><span class="p">)</span>
<span class="mi">1</span><span class="o">&gt;</span> <span class="n">c</span><span class="p">(</span><span class="n">binary_search</span><span class="p">).</span>
<span class="p">{</span><span class="n">ok</span><span class="p">,</span><span class="n">binary_search</span><span class="p">}</span>
<span class="mi">2</span><span class="o">&gt;</span> <span class="nn">binary_search</span><span class="p">:</span><span class="nf">binary_search</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]).</span>
<span class="nf">bs</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="nf">bs</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">true</span>
</pre></div>


<p>Cool! I know I left out a lot of stuff - mostly because I don&#8217;t want to rewrite all of <em><a href="http://learnyousomeerlang.com/">Learn You Some Erlang for Great&nbsp;Good!</a></em></p>
<p>And I really hope this piques your interest to learn it more formally. If you want to learn more about Erlang, I <em>highly</em> recommend reading some of the links&nbsp;below.</p>
<h2>Sources</h2>
<p>[1] <a href="http://www.erlang.org/course/history.html">http://www.erlang.org/course/history.html</a><br />
[2] <a href="http://www.erlang.org/course/history.html">http://veldstra.org/whyerlang/</a><br />
[3] <a href="http://learnyousomeerlang.com/">http://learnyousomeerlang.com/</a>  </p>
  </div>
  <div class="post">
    <h1 class="post-title">
      <a href="/mining-18000-texts-for-fun-and-no-profit.html" rel="bookmark" title="Permalink to Mining 18000 texts for fun and no profit">Mining 18000 texts for fun and no&nbsp;profit</a>
    </h1>
    <span class="post-date">December 27, 2015</span>

    <h3>Well, maybe a little bit of&nbsp;profit.</h3>
<p><strong>text-graph</strong> is a data visualization of a network graph of based on 18,000 texts, with weighted edges representing sentiment degree between named&nbsp;entities.</p>
<p>This is a port of a write-up for a project I made at 6Sense Data Hack in San Francisco. This won <em>Judges&#8217; Favorite Hack</em> and my round-trip flight ticket&#8217;s (<span class="caps">AUS</span> - <span class="caps">SFO</span>) worth, which is why I said a little bit of profit. It was also featured on their <a href="https://6sense.com/2015/08/datahack-2015-65-coders-14-teams-and-a-lot-of-data/" target="_blank">company blog</a>.</p>
<h2>Setup</h2>
<p>For a lot of data science-oriented tasks, the <a href='https://store.continuum.io/cshop/anaconda/' target='_blank'>Anaconda</a> distribution of Python will be awesome. <a href='https://www.jetbrains.com/pycharm/'>PyCharm</a> for static type-checking and quickly accessing docstrings, since I&#8217;m using a lot of unfamiliar&nbsp;libraries.</p>
<h2>Data&nbsp;wrangling</h2>
<ul>
<li>Grab texts from Go <span class="caps">SMS</span> Pro (an alternative text-messaging app) backups (<span class="caps">XML</span>&nbsp;format)</li>
<li>Parse <span class="caps">XML</span> tree using <code>cElementTree</code> from the <code>xml</code> Python lib to get contact names, text,&nbsp;etc.</li>
<li>Create in-memory data structures in Python using data from the <span class="caps">XML</span>&nbsp;tree:</li>
</ul>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TextCorpus</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;It&#39;s a graph.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contacts</span> <span class="o">=</span> <span class="n">get_contact_objs</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contact_names</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">global_adj_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span>
                                            <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;adj_list&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">contacts</span><span class="p">)</span>
                                                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">sublist</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">global_pair_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">contacts</span><span class="p">),</span>
                                                <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;adj_list&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">contacts</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">global_pair_flat_list</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;adj_list&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">contacts</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Contact</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Contact obj reprs one of the people I&#39;ve contacted.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fn</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">get_name_from_fn</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">messages</span> <span class="o">=</span> <span class="n">get_texts</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">messages_str_list</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;body&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">links</span> <span class="o">=</span> <span class="n">get_mentions_msg_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">messages_as_str_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unweighted_links</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">get_mentions_msg_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">messages_as_str_list</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weighted_links</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">get_mentions_msg_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">messages_as_str_list</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">adjacency_list</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">x</span><span class="p">]),</span>
                                            <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">get_mentions_msg_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">messages_as_str_list</span><span class="p">))))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sentiment_links</span> <span class="o">=</span> <span class="n">get_sentiment_link_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">weighted_links</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">avg_sentiment</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sentiment_links</span><span class="p">)</span> <span class="ow">is</span> <span class="mi">0</span>
                                 <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sentiment_links</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sentiment_links</span><span class="p">)</span>
</pre></div>


<h2>Anonymizing&nbsp;data</h2>
<p>There&#8217;s definitely a concern for privacy since these are texts between my&nbsp;friends&#8230;</p>
<p>For each <code>Contact</code> in <code>TextCorpus</code>, grab their <code>TextMessage</code> objs. If a contact name is in the body of the text, perform a hex digest of the name and <code>humanize</code> the&nbsp;hash.</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">humanhash</span>
<span class="kn">import</span> <span class="nn">hashlib</span>

<span class="k">class</span> <span class="nc">TextMessage</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A TextMessage obj&#39;s attrs correspond to the XML tags I care about.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg_id</span><span class="p">,</span> <span class="n">posix</span><span class="p">,</span> <span class="n">sent</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg_id</span> <span class="o">=</span> <span class="n">msg_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">posix</span> <span class="o">=</span> <span class="n">posix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sent</span> <span class="o">=</span> <span class="n">sent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="s1">&#39;neutral&#39;</span> <span class="k">if</span> <span class="n">body</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">anonymize</span><span class="p">(</span><span class="n">body</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mentions</span> <span class="o">=</span> <span class="n">get_mentions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sender</span> <span class="o">=</span> <span class="n">sender</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sent</span> <span class="ow">is</span> <span class="bp">False</span> <span class="k">else</span> <span class="s1">&#39;rainier&#39;</span>

<span class="k">def</span> <span class="nf">anonymize</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Anonymizes a single text body.</span>
<span class="sd">    e.g. &#39;Alice: Bob is awesome&#39; -&gt; &#39;zero-phone-quantum-anchorage: waffle-panda-theory-rushmore is awesome&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">orig</span><span class="p">,</span> <span class="n">hmhashed</span> <span class="ow">in</span> <span class="n">names</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">hmhashed</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">msg</span>

<span class="k">def</span> <span class="nf">digest_and_humanize</span><span class="p">(</span><span class="n">word</span><span class="p">):</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()</span>
    <span class="n">m</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">humanhash</span><span class="o">.</span><span class="n">humanize</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">())</span>
</pre></div>


<h2>Sentiment&nbsp;analysis</h2>
<p>In the interest of time at the hackathon, I used pre-trained models from <a href="http://indico.io" target="_blank">Indico</a>&#8216;s high-quality sentiment <span class="caps">API</span> on short texts. They report about a 93% accuracy rate on the <span class="caps">IMDB</span> movie review&nbsp;corpus.</p>
<p><em>Aside: There are lots of papers and tutorials on sentiment analysis algorithms using machine learning. Some &#8216;not really machine learning&#8217; methods involve using a list of &#8216;happy&#8217; words such as &#8216;awesome&#8217; and &#8216;great&#8217; to increase the sentiment. Could also classifiers such as Naïve Bayes or topic modeling techniques</em>. But&nbsp;anyway&#8230;</p>
<p>Since I can only freely hit the Indico <span class="caps">API</span> 100,000 times, I had to find a way to store <span class="caps">API</span> call results persistently, and also unit test. I could have used a database, but for now, <code>pandas</code> has good tools for parsing&nbsp;CSVs.</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">texts.config</span> <span class="kn">import</span> <span class="n">INDICO_API_KEY</span>

<span class="k">def</span> <span class="nf">indico_batch_sentiment</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;a ONE-OFF method to call the indico.io API to HQ batch sentiment 18192 texts.</span>

<span class="sd">    Stores it as sentiments.csv in the working dir.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;sentiments.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">texts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;texts/filenames.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">filenames</span><span class="p">:</span>
            <span class="n">fn_list</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">strip</span><span class="p">,</span> <span class="p">[</span><span class="n">filename</span> <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">])</span>
            <span class="n">fn_list</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;texts/texts/&#39;</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="n">fn_list</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">fn</span> <span class="ow">in</span> <span class="n">fn_list</span><span class="p">:</span>
                <span class="n">texts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_texts</span><span class="p">(</span><span class="n">fn</span><span class="p">))</span> <span class="c1"># returns TextMessage object</span>
        <span class="n">texts</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span> <span class="n">texts</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">sublist</span><span class="p">]</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;indico_sentiment_hq_errors.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">error_log</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">texts</span><span class="p">:</span>
                <span class="n">sentiment_result</span> <span class="o">=</span> <span class="bp">None</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">sentiment_result</span> <span class="o">=</span> <span class="n">sentiment_hq</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">api_key</span><span class="o">=</span><span class="n">INDICO_API_KEY</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">error_log</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
                <span class="k">finally</span><span class="p">:</span>
                    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="nb">unicode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span>
                                     <span class="p">[</span><span class="n">text</span><span class="o">.</span><span class="n">msg_id</span><span class="p">,</span> <span class="n">text</span><span class="o">.</span><span class="n">posix</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">sent</span><span class="p">),</span>
                                      <span class="n">text</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">mentions</span><span class="p">),</span> <span class="n">sentiment_result</span><span class="p">]])</span>
</pre></div>


<h2>Static&nbsp;visualization</h2>
<p><img alt="Graph viz should be here" src="/images/text-graph.png" /></p>
<h2>Ways to&nbsp;improve</h2>
<ul>
<li>Didn&#8217;t include emoji 👀 or use a different encoding for them because it was breaking Python&#8217;s standard library csv file <span class="caps">IO</span>. Of course, I was going back and forth between <code>pandas</code> and <code>csvfile</code>. Could be factored into sentiment&nbsp;somehow&#8230;</li>
<li>I have a contact named Will&#8230; maybe y&#8217;all could guess what happened then, or what <em>will</em> happen if people use that&nbsp;word&#8230;</li>
<li>I could have gotten Facebook&#8217;s data dump or backed up all my texts from this year as well. But I think at like 18200 texts my computer could handle enough. For a larger scale operation I could use an <span class="caps">AWS</span> instance or&nbsp;something.</li>
</ul>
<p>The code is <a href="https://github.com/rainiera/text-graph" target="_blank">here</a>. Even though I haven&#8217;t touched it in a while, I&#8217;m always dreaming of things to add on to&nbsp;it.</p>
  </div>
  <div class="post">
    <h1 class="post-title">
      <a href="/seeing-if-this-script-worked.html" rel="bookmark" title="Permalink to Seeing if this script worked">Seeing if this script&nbsp;worked</a>
    </h1>
    <span class="post-date">December 27, 2015</span>

    <p>Automates writing test content with correct metadata for Pelican. This is the partial code for it, which can also be found <a href="https://github.com/rainiera/dotfiles/blob/master/scripts/write_more.py">here</a>:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s2">&quot;/Users/rainierababao/cs/rainier/content/&quot;</span><span class="p">)</span>
<span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">arg</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;{}.md&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">((</span><span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">words</span><span class="p">)),</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">beak</span><span class="p">:</span>
    <span class="n">beak</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Title: {}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">((</span><span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">words</span><span class="p">)))</span>
    <span class="n">beak</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Date: {}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)))</span>
    <span class="n">beak</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Category: General</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">beak</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Automates writing test content...&quot;</span><span class="p">)</span>
    <span class="c1"># ...turtles all the way down :)</span>
</pre></div>


<p>And I ran this to automate publishing it, dubbed <a href="https://github.com/rainiera/dotfiles/blob/master/scripts/fly-pelican">fly-pelican</a>:</p>
<div class="highlight"><pre><span></span><span class="nb">source</span> activate blog
<span class="nb">cd</span> /Users/rainierababao/cs/rainier
pelican content -o output -s pelicanconf.py
ghp-import output
git push git@github.com:rainiera/rainiera.github.io.git gh-pages:master
<span class="nb">echo</span> <span class="s2">&quot;Published!&quot;</span>
</pre></div>


<p><code>blog</code> is just a conda env I use for site&nbsp;development.</p>
<p>Made with ❤️ and automation in Austin, <span class="caps">TX</span></p>
  </div>
  <div class="post">
    <h1 class="post-title">
      <a href="/hello-world.html" rel="bookmark" title="Permalink to Hello World!">Hello&nbsp;World!</a>
    </h1>
    <span class="post-date">December 26, 2015</span>

    <div class="highlight"><pre><span></span><span class="cp">#include</span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Hello World!&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
  </div>
</div>
      </div>

      <label for="sidebar-checkbox" class="sidebar-toggle"></label>

      <script>
        (function(document) {
          var i = 0;
          // snip empty header rows since markdown can't
          var rows = document.querySelectorAll('tr');
          for(i=0; i<rows.length; i++) {
            var ths = rows[i].querySelectorAll('th');
            var rowlen = rows[i].children.length;
            if (ths.length > 0 && ths.length === rowlen) {
              rows[i].remove();
            }
          }
        })(document);
      </script>

      <script>
        /* Lanyon & Poole are Copyright (c) 2014 Mark Otto. Adapted to Pelican 20141223 and extended a bit by @thomaswilley */
        (function(document) {
          var toggle = document.querySelector('.sidebar-toggle');
          var sidebar = document.querySelector('#sidebar');
          var checkbox = document.querySelector('#sidebar-checkbox');
          document.addEventListener('click', function(e) {
            var target = e.target;
            if(!checkbox.checked ||
            sidebar.contains(target) ||
            (target === checkbox || target === toggle)) return;
            checkbox.checked = false;
            }, false);
            })(document);
      </script>
      <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-57948440-1']);
        _gaq.push(['_trackPageview']);
        (function() {
         var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
         ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
         var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
         })();
       </script>
     </div>
  </body>
</html>